stages:
  - build
variables:
  GIT_SUBMODULE_STRATEGY: recursive

build:
  stage: build
  image: "debian"
  tags:
    - build-c
  variables:
    LANG: en_US.UTF-8  
    LANGUAGE: en_US:en  
    LC_ALL: en_US.UTF-8 
  before_script:
    - apt-get update && apt-get upgrade -y && apt-get install -y tmux locales build-essential chrpath cpio debianutils diffstat file gawk gcc git iputils-ping libacl1 liblz4-tool locales python3 python3-git python3-jinja2 python3-pexpect python3-pip python3-subunit socat texinfo unzip wget xz-utils zstd && apt-get clean
    - sed -i '/en_US.UTF-8/s/^# //g' /etc/locale.gen && locale-gen
  script:
    - source sources/poky/oe-init-build-env
    - bitbake swupdate-image-fullcmdline

